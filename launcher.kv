#:kivy 1.10.0
#:import main main
#:import md_icons kivymd.icon_definitions.md_icons
#:import ListAdapter kivy.adapters.listadapter.ListAdapter
#:import ListItemButton kivy.uix.listview.ListItemButton

CustBoxLayout:
<ViewButton@Button>:
    background_color: .3, .3, .3, 1
    background_down: 'img/FFFFFF-0.png'

    halign: 'left'
    valign: 'center'

    text_size: self.size
    padding_x: 10

    on_release: main.launcher.item_click_callback(self.path)

    ext: ''

    Label:
        text: root.ext
        
        pos: (root.pos[0] + root.width - self.width + self.width*.2, root.pos[1] - 34)

        color: .2, .2, .2, 1

<ActionButton@Button>:
    size_hint: None, None
    width: 50
    height: 40

<LoadDialog>:
    BoxLayout:
        orientation: 'vertical'
        size: root.size
        pos: root.pos

        FileChooserListView:
            id: filechooser
        
        BoxLayout:
            size_hint_y: None
            height: 30

            Widget:

            ActionButton:
                text: 'Cancel'
                on_release: root.cancel()

            ActionButton:
                text: 'Load'
                on_release: root.load(filechooser.path, filechooser.selection)


<CustBoxLayout>:
    padding: 4

    orientation: 'vertical'

    BoxLayout:
        id: head

        spacing: 8
        
        size_hint_y: None
        height: 33
        
        pos_hint: {'top': True}

        TextInput:
            id: search_field

            size_hint: None, None
            size: 200, 33
            
            background_normal: 'img/FFFFFF.png'
            cursor_color: 0, 0, 0, 1

            multiline: False

            on_focus: main.launcher.l.dropdown_show()
            on_text_validate: main.launcher.enter_hit_callback()

        BoxLayout:
            id: btn_box

            padding: -8

            MaterialIconButton:
                id: dropdown_button

                icon: 'md-arrow-drop-down-circle'
                
                on_release: root.dropdown_show()

            MaterialIconButton:
                id: add_button

                icon: 'md-add-circle'

                on_release: root.show_load()

    BoxLayout:
        id: lister

        orientation: 'vertical'

        Widget:
            size_hint_y: .02

        RecycleView:
            id: item_list

            viewclass: 'ViewButton'
            
            RecycleBoxLayout:
                default_size: None, 30
                default_size_hint: 1, None
                size_hint: None, None
                width: item_list.width
                height: self.minimum_height
                orientation: 'vertical'
